# Basic Application & System Settings
CONFIG_BOOT_BANNER_STRING="Beremiz_4uC PLC Runtime"

CONFIG_APP_STORAGE_FLASH_LITTLEFS=n
CONFIG_APP_STORAGE_SDCARD_FATFS=y
CONFIG_IO_TEST_I2C_GPIO=n
CONFIG_IO_TEST_STM32_GPIO=y

CONFIG_APP_WIPE_STORAGE=n

CONFIG_UDYNLINK=y
CONFIG_UDYNLINK_BUFFER_SIZE=16384
CONFIG_UDYNLINK_LOG_LEVEL_ERR=y

CONFIG_SIMPLE_THREAD_STACK_MONITORING=y
CONFIG_PLC_SHELL_COMMANDS=y
CONFIG_PLC_SHELL_TEST_COMMANDS=y

# Posix & System
CONFIG_WATCHDOG=y
CONFIG_WDT_DISABLE_AT_BOOT=n
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=2048
CONFIG_POSIX_API=y 
CONFIG_MAIN_STACK_SIZE=4096
CONFIG_HEAP_MEM_POOL_SIZE=24576
CONFIG_SYS_HEAP_RUNTIME_STATS=y
CONFIG_INIT_STACKS=y
CONFIG_COMMON_LIBC_MALLOC_ARENA_SIZE=1024
CONFIG_COMMON_LIBC_MALLOC=y
CONFIG_JSON_LIBRARY=y

# GPIO Configuration
CONFIG_GPIO=y
CONFIG_GPIO_STM32=y

# Memory Protection Unit (Disabled)
CONFIG_ARM_MPU=n

# Console & Logging Configuration
CONFIG_CONSOLE=y
CONFIG_UART_CONSOLE=y
CONFIG_EARLY_CONSOLE=n
CONFIG_STDOUT_CONSOLE=y
CONFIG_CONSOLE_HANDLER=y
CONFIG_CONSOLE_SUBSYS=y
CONFIG_CONSOLE_GETCHAR=y
CONFIG_CONSOLE_GETCHAR_BUFSIZE=128
CONFIG_CONSOLE_PUTCHAR_BUFSIZE=128

# Enhanced Logging Settings
CONFIG_LOG=y
CONFIG_LOG_BUFFER_SIZE=2048
CONFIG_LOG_MODE_IMMEDIATE=y
CONFIG_LOG_DEFAULT_LEVEL=1      
CONFIG_LOG_RUNTIME_FILTERING=y
CONFIG_LOG_PRINTK=y
CONFIG_LOG_BACKEND_UART=n
CONFIG_LOG_CMDS=y
CONFIG_LOG_CUSTOM_FORMAT_SUPPORT=y
CONFIG_NET_LOG=n
CONFIG_LOG_OUTPUT_FORMAT_CUSTOM_TIMESTAMP=y

# Shell Configuration
CONFIG_SHELL=y
CONFIG_SHELL_STACK_SIZE=4096
CONFIG_SHELL_LOG_BACKEND=y
CONFIG_SHELL_BACKEND_SERIAL=y
CONFIG_SHELL_BACKEND_DUMMY=n
CONFIG_SHELL_CMDS_SELECT=y
CONFIG_DEVICE_SHELL=n
CONFIG_DEVMEM_SHELL=n
CONFIG_SHELL_CMDS=n
CONFIG_SHELL_STATS=n
CONFIG_SETTINGS_SHELL=n

# Peripheral Configurations (Counter/RTC, UART, I2C)
# CONFIG_COUNTER=y
# CONFIG_COUNTER_LOG_LEVEL_ERR=y
CONFIG_RTC=y
CONFIG_RTC_STM32=y
CONFIG_POSIX_CLOCK=y
CONFIG_SERIAL=y
CONFIG_UART_USE_RUNTIME_CONFIGURE=y
CONFIG_UART_INTERRUPT_DRIVEN=y
CONFIG_I2C=y
CONFIG_I2C_GPIO=y

# Networking Configuration
CONFIG_NETWORKING=y
CONFIG_NET_L2_ETHERNET=y

CONFIG_NET_ARP=y
CONFIG_NET_IPV4=y
CONFIG_NET_IPV6=n
CONFIG_NET_UDP=y
CONFIG_NET_TCP=y
CONFIG_NET_SOCKETS=y

CONFIG_NET_CONNECTION_MANAGER=y
CONFIG_NET_MGMT=y
CONFIG_NET_MGMT_EVENT=y
CONFIG_NET_MGMT_EVENT_STACK_SIZE=2048

CONFIG_NET_MAX_CONN=12
CONFIG_NET_MAX_CONTEXTS=12

# Networking logging
CONFIG_NET_LOG=n
CONFIG_NET_BUF_VARIABLE_DATA_SIZE=y
CONFIG_NET_BUF_LOG_LEVEL_ERR=y
CONFIG_NET_L2_ETHERNET_LOG_LEVEL_ERR=y
CONFIG_NET_IF_LOG_LEVEL_ERR=y

# Networking Initialization
CONFIG_NET_CONFIG_SETTINGS=y
CONFIG_NET_CONFIG_NEED_IPV4=y
CONFIG_NET_CONFIG_INIT_TIMEOUT=5
CONFIG_NET_CONFIG_AUTO_INIT=n
CONFIG_NET_CONFIG_LOG_LEVEL_INF=y

# Static IP Configuration
CONFIG_NET_CONFIG_MY_IPV4_ADDR="192.168.1.136"
CONFIG_NET_CONFIG_MY_IPV4_GW="192.168.1.2"
CONFIG_NET_CONFIG_MY_IPV4_NETMASK="255.255.255.0"
CONFIG_DNS_SERVER1="8.8.8.8"
CONFIG_DNS_SERVER2=""

# DHCP Configuration
CONFIG_NET_DHCPV4=n
CONFIG_NET_DHCPV4_OPTION_CALLBACKS=n
CONFIG_NET_DHCPV4_LOG_LEVEL_INF=y

# DNS Configuration
CONFIG_DNS_RESOLVER=y
CONFIG_DNS_RESOLVER_MAX_SERVERS=2
CONFIG_DNS_SERVER_IP_ADDRESSES=y
CONFIG_DNS_NUM_CONCUR_QUERIES=5
CONFIG_DNS_RESOLVER_ADDITIONAL_BUF_CTR=5
CONFIG_DNS_RESOLVER_ADDITIONAL_QUERIES=2
CONFIG_DNS_SERVER_IP_ADDRESSES=y
CONFIG_DNS_RESOLVER_LOG_LEVEL_INF=y

# Hostname Configuration
CONFIG_NET_HOSTNAME_ENABLE=y
CONFIG_NET_HOSTNAME_UNIQUE=y
CONFIG_NET_HOSTNAME="Beremiz4uC"

# MDNS Configuration
CONFIG_MDNS_RESPONDER=y
CONFIG_DNS_SD=y
CONFIG_MDNS_RESPONDER_DNS_SD=y
CONFIG_MDNS_RESPONDER_LOG_LEVEL_INF=y

# SNTP Configuration
CONFIG_SNTP=y
CONFIG_NET_CONFIG_CLOCK_SNTP_INIT=y
CONFIG_NET_CONFIG_SNTP_INIT_SERVER="0.de.pool.ntp.org"
CONFIG_SNTP_LOG_LEVEL_INF=y

# SPI Flash Configuration
CONFIG_SPI=y
CONFIG_FLASH=y
CONFIG_FLASH_MAP=y
CONFIG_FLASH_PAGE_LAYOUT=y
CONFIG_FLASH_LOG_LEVEL_ERR=y

# Filesystem Configuration LittleFS
CONFIG_FILE_SYSTEM=y
CONFIG_FILE_SYSTEM_MKFS=y
CONFIG_FILE_SYSTEM_LITTLEFS=y
CONFIG_FS_LITTLEFS_FC_HEAP_SIZE=2048
CONFIG_FS_LITTLEFS_BLK_DEV=n
CONFIG_FS_LOG_LEVEL_ERR=y

# Filesystem Configuration FatFS
CONFIG_FILE_SYSTEM=y
CONFIG_FAT_FILESYSTEM_ELM=y
CONFIG_DISK_ACCESS=y
CONFIG_DISK_DRIVERS=y
CONFIG_DISK_DRIVER_SDMMC=y

# C++ Language Support
CONFIG_CPP=y
CONFIG_STD_CPP20=y
CONFIG_GLIBCXX_LIBCPP=y
CONFIG_NEWLIB_LIBC=y
CONFIG_POSIX_FS=y
CONFIG_REQUIRES_FULL_LIBCPP=y

# eRPC Framework
CONFIG_ERPC=y
CONFIG_ERPC_TRANSPORT_UART=n
CONFIG_ERPC_TRANSPORT_TCP=y
CONFIG_THREAD_CUSTOM_DATA=y

# Settings Subsystem
CONFIG_SETTINGS=y
CONFIG_SETTINGS_FILE=y
CONFIG_SETTINGS_FILE_PATH="/lfs:/plc/settings.ini"

# mbedtls
CONFIG_MBEDTLS=y
CONFIG_MBEDTLS_BUILTIN=y
CONFIG_MBEDTLS_ENABLE_HEAP=y
CONFIG_BASE64=y

# debugging
CONFIG_DEBUG=n
CONFIG_DEBUG_INFO=n
CONFIG_SEGGER_DEBUGMON=n
CONFIG_CORTEX_M_DEBUG_MONITOR_HOOK=n
CONFIG_DEBUG_INFO=n
